<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" content="text/html"/>
    <title>Task Info</title>

    <link href="http://cdn.jsdelivr.net/webjars/bootstrap/3.3.7/css/bootstrap.min.css"
          th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}"
          rel="stylesheet" media="screen" />

    <style th:inline="text">
        @import url(https://fonts.googleapis.com/css?family=Roboto:400,100italic,100,300,300italic,900italic,900,700,700italic,500italic,500,400italic);

        body {
            font-family: 'Roboto', sans-serif;
        }

        .twt-wrapper .panel-body {
            max-height:650px;
            overflow:auto;
        }
        .twt-wrapper .media-list .media img {
            width:64px;
            height:64px;
            border:2px solid #e5e7e8;
        }
        .twt-wrapper .media-list .media {
            border-bottom:1px dashed #efefef;
            margin-bottom:25px;
        }

        .navbar{margin-bottom:0;}
        section{width:100%; float:left;}
        .banner-section{/*background-image:url("http://makishvili.github.io/print-and-go/pictures/msk.png");*/
            background-size:cover; height: 300px; left: 0; position: absolute; top: 4em; background-position:0;}
        .post-title-block{padding: 140px 0;}
        .post-title-block h1 {color: #fff; font-size: 85px; font-weight: bold; text-transform: capitalize;}
        .post-title-block li{font-size:20px; color: #fff;}
        .image-block{float:left; width:100%; margin-bottom:10px;}
        .footer-link{float:left; width:100%; background:#222222; text-align:center; padding:30px;}
        .footer-link a{color:#A9FD00; font-size:18px; text-transform:uppercase;}
    </style>

</head>
<body>

<div>
    <div th:replace="fragments/header :: header"> </div>

    <!--<br/> <br/> <br/>-->

    <div>
        <span th:utext="${msg}" style="margin: 5px"></span>
    </div>

    <!--<section class="banner-section">-->
        <!--<div>-->
            <!--&lt;!&ndash; MAP &ndash;&gt;-->
            <!--&lt;!&ndash;<div th:replace="fragments/map_form :: map_form"> </div>&ndash;&gt;-->
        <!--</div>-->
    <!--</section>-->
    <section class="post-content-section">
        <div class="container">

            <div th:object="${task}" class="row">

                <div class="banner-section">
                    <!-- MAP -->
                    <div th:replace="fragments/map_form :: map_form"> </div>
                </div>

                <div th:object="${user}" class="col-lg-12 col-md-12 col-sm-12 post-title-block">

                    <!--<h1 class="text-center">Title</h1>-->

                    <div th:if="${task.topicStarterId} != ${user.id}" class="list-inline text-center">
                        <h1 class="text-center" th:text="${user.name}" style="color: #222222"> | </h1>
                        <!--<li> | </li>-->
                    </div>
                    <ul th:if="${task.topicStarterId} == ${user.id}" class="list-inline text-center">
                        <li>
                            <form th:action="@{/secure/task/form}"
                                  method="GET" style="padding: 15px">
                                <button class="btn btn btn-success" name="id" th:value="${task.id}"
                                        type="Submit" style="font-weight: 900">
                                    Update
                                </button>
                            </form>
                        </li>
                        <li>
                            <form th:action="@{'/secure/task/' + ${task.id}}" th:method="DELETE"
                                  style="padding: 5px">
                                <input type="hidden" name="_method" value="DELETE"/>
                                <button class="btn btn-danger"  type="Submit" style="font-weight: 900">
                                    Delete
                                </button>
                            </form>
                        </li>
                    </ul>

                    <ul th:if="${task?.topicStarterId} != ${user?.id} and ${task.theme} != null" class="list-inline text-center">
                        <li th:if="${task.subscribed} == true">
                            <form th:action="@{/secure/task/subscribe}" th:method="DELETE">
                                <input type="hidden" name="_method" value="DELETE">
                                <button name="id" class="btn btn-warning" th:value="${task.id}" type="Submit" th:text="Unsubscribe"></button>
                            </form>
                        </li>
                        <li th:if="${task.subscribed} == false">
                            <form th:action="@{/secure/task/subscribe}" method="POST"
                                  >
                                <input type="hidden" name="_method" value="POST"/>
                                <button name="id" class="btn btn-warning" th:value="${task.id}" type="Submit" th:text="Subscribe"></button>
                            </form>
                        </li>
                    </ul>
                </div>


                <div class="col-lg-9 col-md-9 col-sm-12">
                    <p style="font-weight: 900;">
                        Created :
                        <span th:text="${task.getPrettyCreateDate()}"></span>
                    </p>

                    <div><span style="font-weight: 900">Title : </span>
                        <h3 class="lead" style="padding: 5px" th:text="${task.theme}">
                        </h3>
                    </div>
                    <div><span style="font-weight: 900">Description : </span>
                        <br/>
                        <h3 th:text="${task.descr}">
                            <span></span>
                        </h3>
                    </div>
                </div>

                <div class="col-lg-3 col-md-3 col-sm-12" >
                    <div>
                        <div class="twt-wrapper">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    Comments
                                </div>
                                <div class="panel-body" style="width: 220px;">
                                    <form autocomplete="off" th:action="@{'/secure/task/' + ${task.id} + '/comment'}"
                                          id="commentForm" style="width: 200px;" th:object="${comment}"
                                          method="post" class="form-registration" role="form">
                                        <textarea name="message" form="commentForm"
                                                  class="form-control" placeholder="Enter your comments..." rows="3"></textarea>
                                        <br/>
                                        <input type="hidden" th:name="${comment.taskId}" th:value="${task.id}"/>
                                        <input type="hidden" th:name="${comment.userId}" th:value="${user.id}"/>
                                        <button type="submit" class="btn btn-primary btn-sm pull-right">Submit</button>
                                        <div class="clearfix"></div>
                                    </form>
                                    <hr />
                                    <ul th:each="commet : ${task.comments}" class="media-list">
                                        <li class="media">
                                            <!--<a href="#" class="pull-left">-->
                                                <!--<img src="assets/img/1.png" alt="" class="img-circle">-->
                                            <!--</a>-->
                                            <div class="media-body">
                                            <span class="text-muted pull-right">
                                                <small class="text-muted">
                                                    <span th:text="${comment.getPrettyCreateDate()}"></span>
                                                </small>
                                            </span>
                                            <strong class="text-success">@<span th:text="${comment?.userName}">Anonymous</span></strong>
                                            <p>
                                                <span th:text="${comment.message}"></span>
                                            </p>
                                            </div>
                                        </li>
                                    </ul>
                                    <span class="text-danger">Hot Thread</span>
                                </div>
                            </div>
                        </div>
                        <!-- TWEET WRAPPER END -->
                    </div>
                </div>
            </div>


        </div> <!-- /container -->
    </section>
</div>
</body>
</html>